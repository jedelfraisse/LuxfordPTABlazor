@using LuxfordPTAWeb.Client.Services
@inject GoogleAnalyticsService GoogleAnalyticsService
@implements IDisposable

@code {
    private bool hasInitialized = false;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender && !hasInitialized)
        {
            hasInitialized = true;
            // Initialize Google Analytics after first render when JS runtime is available
            await GoogleAnalyticsService.InitializeAsync();
        }
    }
    
    public void Dispose()
    {
        // The GoogleAnalyticsService will handle its own disposal
    }
}